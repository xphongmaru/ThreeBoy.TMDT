var g=Object.defineProperty;var x=Object.getOwnPropertySymbols;var f=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var j=(l,i,t)=>i in l?g(l,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[i]=t,c=(l,i)=>{for(var t in i||(i={}))f.call(i,t)&&j(l,t,i[t]);if(x)for(var t of x(i))F.call(i,t)&&j(l,t,i[t]);return l};import{f as N,j as e}from"./main-794.js";import{e as v,_ as n}from"./bi.828.0.js";import{g as _}from"./bi.731.754.js";import{aa as w}from"./bi.266.440.js";import{a as y}from"./bi.499.3.js";import{b as k}from"./bi.690.11.js";const u=(l,i,t)=>{const s=c({},i);s.field_map.splice(l,0,{}),t(c({},s))},$=(l,i,t)=>{const s=c({},i);s.field_map.length>1&&s.field_map.splice(l,1),t(c({},s))};function D({i:l,formFields:i,field:t,dropboxConf:s,setDropboxConf:r}){var h;const m=N(v),{isPro:d}=m,b=(a,o)=>{const p=c({},s);p.field_map[o][a.target.name]=a.target.value,r(c({},p))};return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:a=>b(a,l),children:[e.jsx("option",{value:"",children:n("Select Field","bit-integrations")}),e.jsx("optgroup",{label:n("Form Fields","bit-integrations"),children:i==null?void 0:i.filter(a=>a.type==="file").map(a=>e.jsx("option",{value:a.name,children:a.label},`ff-rm-${a.name}`))}),e.jsx("optgroup",{label:sprintf(n("General Smart Codes %s","bit-integrations"),d?"":`(${n("Pro","bit-integrations")})`),children:d&&((h=y)==null?void 0:h.map(a=>e.jsx("option",{value:a.name,children:a.label},`ff-rm-${a.name}`)))})]}),e.jsxs("select",{className:"btcd-paper-inp",name:"dropboxFormField",value:t.dropboxFormField,onChange:a=>b(a,l),children:[e.jsx("option",{value:"",children:n("Select Folder","bit-integrations")}),w(s.foldersList,"lower_path","ASC").map(({name:a,lower_path:o})=>e.jsx("option",{value:o,children:o.substring(1).split("/").map(p=>p.replace("/",">")).join(" > ")},o))]})]}),e.jsx("button",{onClick:()=>u(l,s,r),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>$(l,s,r),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})})}function M({dropboxConf:l,setDropboxConf:i}){var s;const t=(r,m)=>{const d=c({},l);m==="deleteFile"&&(r.target.checked?d.actions.delete_from_wp=!0:delete d.actions.delete_from_wp),i(c({},d))};return e.jsx("div",{className:"pos-rel d-flx w-8",children:e.jsx(k,{checked:((s=l.actions)==null?void 0:s.delete_from_wp)||!1,onChange:r=>t(r,"deleteFile"),className:"mt-4 mr-2",value:"delete_from_wp",title:n("Delete File From Wordpress","bit-integrations"),subTitle:n("Delete file from Wordpress after upload in Dropbox","bit-integrations")})})}function R({flowID:l,formFields:i,dropboxConf:t,setDropboxConf:s}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-5",children:[e.jsx("b",{className:"wdt-100",children:n("Field Map","bit-integrations")}),e.jsx("button",{onClick:()=>_(l,t,s),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${n("Fetch All Dropbox Folders","bit-integrations")}'`},type:"button",children:"â†»"})]}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:n("File Input","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:n("Dropbox Folder","bit-integrations")})})]}),t==null?void 0:t.field_map.map((r,m)=>e.jsx(D,{i:m,field:r,formFields:i,dropboxConf:t,setDropboxConf:s},`rp-m-${m+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>u(t.field_map.length,t,s),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:n("Utilities","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(M,{dropboxConf:t,setDropboxConf:s})]})}export{R as D};
