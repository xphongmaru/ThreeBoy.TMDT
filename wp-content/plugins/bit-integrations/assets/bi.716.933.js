var V=Object.defineProperty;var I=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var _=(i,r,t)=>r in i?V(i,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[r]=t,b=(i,r)=>{for(var t in r||(r={}))L.call(r,t)&&_(i,t,r[t]);if(I)for(var t of I(r))S.call(r,t)&&_(i,t,r[t]);return i};import{r as q,j as e,L as R,f as A}from"./main-794.js";import{_ as d,e as O}from"./bi.828.0.js";import{x as U}from"./bi.266.440.js";import{a as E,M as G,b as P}from"./bi.499.3.js";import{b as T,T as B}from"./bi.690.11.js";import{a as D}from"./bi.685.9.js";import{r as $,a as H,b as k}from"./bi.402.932.js";function Z({zagoMailConf:i,setZagoMailConf:r,isLoading:t,setIsLoading:l}){var j,v;const[u,m]=q.useState({show:!1,action:()=>{}}),h=(c,n)=>{var w;const a=b({},i);n==="tag"&&((w=c.target)!=null&&w.checked?($(i,r,l),a.actions.tags=!0):(m({show:!1}),delete a.actions.tags),m({show:"tag"})),n==="update"&&(c.target.checked?a.actions.update=!0:delete a.actions.update),r(b({},a))},N=()=>{m({show:!1})},x=c=>{const n=b({},i);n.selectedTags=c,r(b({},n))};return e.jsxs("div",{className:"pos-rel d-flx w-8",children:[e.jsx(T,{checked:(i==null?void 0:i.selectedTags.length)||!1,onChange:c=>h(c,"tag"),className:"wdt-200 mt-4 mr-2",value:"tags",title:d("Add Tags","bit - integrations"),subTitle:d("Selects tags for contact")}),e.jsxs(D,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:d("Ok","bit-integrations"),show:u.show==="tag",close:N,action:N,title:d("Tags","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsx("div",{className:"mt-2",children:d("Select tags","bit-integrations")}),t.tags?e.jsx(R,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx(U,{options:(j=i==null?void 0:i.tags)==null?void 0:j.map(c=>({label:c.tagName,value:c.tagId})),className:"msl-wrp-options",defaultValue:i==null?void 0:i.selectedTags,onChange:c=>x(c)}),e.jsx("button",{onClick:()=>$(i,r,l),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${d("Refresh Groups","bit-integrations")}'`},type:"button",children:"↻"})]})]}),e.jsx(T,{checked:((v=i.actions)==null?void 0:v.update)||!1,onChange:c=>h(c,"update"),className:"wdt-200 mt-4 mr-2",value:"user_share",title:d("Update ZagoMail","bit-integrations"),subTitle:d("Update Responses with ZagoMail existing email?","bit-integrations")})]})}function J({i,formFields:r,field:t,zagoMailConf:l,setZagoMailConf:u}){var a,w,F,y;const m=t.required,h=((a=l==null?void 0:l.default)==null?void 0:a.fields)&&Object.values((w=l==null?void 0:l.default)==null?void 0:w.fields).filter(s=>!s.required),N=A(O),{isPro:x}=N,j=s=>{const p=b({},l);p.field_map.splice(s,0,{}),u(p)},v=s=>{const p=b({},l);p.field_map.length>1&&p.field_map.splice(s,1),u(p)},c=(s,p)=>{const o=b({},l);o.field_map[p][s.target.name]=s.target.value,s.target.value==="custom"&&(o.field_map[p].customValue=""),u(o)},n=(s,p)=>{const o=b({},l);o.field_map[p].customValue=s.target.value,u(o)};return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:s=>c(s,i),children:[e.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),e.jsx("optgroup",{label:d("List Fields","bit-integrations"),children:r==null?void 0:r.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`))}),e.jsx("option",{value:"custom",children:d("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`${d("General Smart Codes","bit-integrations")} ${x?"":`(${d("Pro","bit-integrations")})`}`,children:x&&((F=E)==null?void 0:F.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`)))})]}),t.formField==="custom"&&e.jsx(G,{onChange:s=>n(s,i),label:d("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:t.customValue,placeholder:d("Custom Value","bit-integrations")}),e.jsxs("select",{className:"btcd-paper-inp",name:"zagoMailField",value:t.zagoMailField,onChange:s=>c(s,i),disabled:m,children:[e.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),m?((y=l==null?void 0:l.default)==null?void 0:y.fields)&&Object.values(l.default.fields).map(s=>e.jsx("option",{value:s.fieldId,children:s.fieldName},`${s.fieldId}-1`)):h&&h.map(s=>e.jsx("option",{value:s.fieldId,children:s.fieldName},`${s.fieldId}-1`))]})]}),!m&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>j(i),className:"icn-btn sh-sm ml-2",type:"button",children:"+"}),e.jsx("button",{onClick:()=>v(i),className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:e.jsx(B,{})})]})]})}function M({formID:i,formFields:r,zagoMailConf:t,setZagoMailConf:l,isLoading:u,setIsLoading:m,setSnackbar:h}){var x,j,v;const N=c=>{const n=c.target.value,a=b({},t);n?a.listId=n:delete a.listId,k(a,l,m,h),l(b({},a))};return(x=t==null?void 0:t.default)==null||x.zagoMailLists,e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:d("List:","bit-integrations")}),e.jsxs("select",{value:t==null?void 0:t.listId,name:"listId",id:"",className:"btcd-paper-inp w-5",onChange:N,children:[e.jsx("option",{value:"",children:d("Select List","bit-integrations")}),((j=t==null?void 0:t.default)==null?void 0:j.zagoMailLists)&&Object.keys(t.default.zagoMailLists).map(c=>e.jsx("option",{value:t.default.zagoMailLists[c].listId,children:t.default.zagoMailLists[c].listName},`${c+1}`))]}),e.jsx("button",{onClick:()=>H(t,l,m,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh ZagoMail list"'},type:"button",disabled:u,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),u&&e.jsx(R,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,translist:"scale(0.7)"}}),e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:d("Map Fields","bit-integrations")}),e.jsx("button",{onClick:()=>k(t,l,m,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${d("Refresh ZagoMail Field","bit-integrations")}'`},type:"button",disabled:u,children:"↻"})]}),((t==null?void 0:t.listId)||((v=t==null?void 0:t.default)==null?void 0:v.fields))&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("List Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("ZagoMail Fields","bit-integrations")})})]}),t.field_map.map((c,n)=>e.jsx(J,{i:n,field:c,zagoMailConf:t,formFields:r,setZagoMailConf:l},`ZagoMail-m-${n+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>P(t.field_map.length,t,l),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:d("Utilities","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(Z,{zagoMailConf:t,setZagoMailConf:l,isLoading:u,setIsLoading:m})]})]})}export{M as Z};
