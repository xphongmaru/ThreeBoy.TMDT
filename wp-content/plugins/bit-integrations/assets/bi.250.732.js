var O=Object.defineProperty;var T=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var y=(s,c,n)=>c in s?O(s,c,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[c]=n,A=(s,c)=>{for(var n in c||(c={}))V.call(c,n)&&y(s,n,c[n]);if(T)for(var n of T(c))z.call(c,n)&&y(s,n,c[n]);return s};import{j as e,r as E,f as q,L as B}from"./main-794.js";import{x as $,u as H}from"./bi.266.440.js";import{_ as a,e as G}from"./bi.828.0.js";import{h as P,d as U,a as R,b as D,c as K,e as W}from"./bi.571.733.js";import{T as L,b as k}from"./bi.690.11.js";import{a as S}from"./bi.685.9.js";import{P as M,a as I}from"./bi.591.710.js";import{r as J,a as Z,b as Q,d as X}from"./bi.494.731.js";import{a as Y,h as f}from"./bi.499.3.js";import{T as C}from"./bi.257.704.js";function ee({i:s,formFields:c,field:n,mailChimpConf:t,setMailChimpConf:i,addressField:g}){const v=n.required,b=g.filter(d=>!d.required);return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:n.formField||"",onChange:d=>P(d,s,t,i),children:[e.jsx("option",{value:"",children:a("Select Field","bit-integrations")}),c.map(d=>d.type!=="file"&&e.jsx("option",{value:d.name,children:d.label},`ff-zhcrm-${d.name}`))]}),e.jsxs("select",{className:"btcd-paper-inp",name:"mailChimpAddressField",value:n.mailChimpAddressField||"",onChange:d=>P(d,s,t,i),disabled:v,children:[e.jsx("option",{value:"",children:a("Select Field","bit-integrations")}),v?Object.values(g).map((d,r)=>e.jsx("option",{value:d.tag,children:d.name},`add-${r*2}`)):Object.values(b).map((d,r)=>e.jsx("option",{value:d.tag,children:d.name},`add-${r*2}`))]}),!v&&e.jsx("button",{onClick:()=>U(s,t,i),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(L,{})})]})}function te({mailChimpConf:s,setMailChimpConf:c,formFields:n,address:t}){var N,w,p;const[i,g]=E.useState({show:!1}),v=q(G),{isPro:b}=v,d=(l,x)=>{const o=A({},s);(x==="language"||x==="gdpr")&&g({show:x}),x==="update"&&(l.target.checked?o.actions.update=!0:delete o.actions.update),x==="double_opt_in"&&(l.target.checked?o.actions.double_opt_in=!0:delete o.actions.double_opt_in),x==="address"&&(l.target.checked?(o.actions.address=!0,o.address_field=t.filter(F=>F.required).map(F=>({formField:"",mailChimpAddressField:F.tag,required:!0}))):(delete o.actions.address,o.address_field="")),c(A({},o))},r=()=>{g({show:!1})},h=(l,x)=>{c(o=>H(o,F=>{F[x]=l}))};return e.jsx("div",{className:"pos-rel d-flx w-8",children:(!(s!=null&&s.module)||(s==null?void 0:s.module)==="add_a_member_to_an_audience")&&e.jsxs(e.Fragment,{children:[e.jsx(k,{checked:((N=s.actions)==null?void 0:N.address)||!1,onChange:l=>d(l,"address"),className:"wdt-200 mt-4 mr-2",value:"address",title:a("Add Address Field","bit-integrations"),subTitle:a("Add Address Field","bit-integrations")}),e.jsx(k,{checked:((w=s.actions)==null?void 0:w.double_opt_in)||!1,onChange:l=>d(l,"double_opt_in"),className:"wdt-200 mt-4 mr-2",value:"double_opt_in",title:a("Double Opt-in","bit-integrations"),subTitle:a("Add Double Opt-in","bit-integrations")}),e.jsx(k,{checked:((p=s.actions)==null?void 0:p.update)||!1,onChange:l=>d(l,"update"),className:"wdt-200 mt-4 mr-2",value:"user_share",title:a("Update Mail Chimp","bit-integrations"),subTitle:a("Update Responses with MailChimp exist Aduience?","bit-integrations")}),e.jsx(k,{checked:(s==null?void 0:s.selectedLanguage)||!1,onChange:l=>d(l,"language"),className:"wdt-200 mt-4 mr-2",value:"language",isInfo:!b,title:e.jsx(M,{title:a("Add Language","bit-integrations")}),subTitle:e.jsx(I,{title:a("Add Language","bit-integrations"),subTitle:a("Add Language","bit-integrations"),proVersion:"2.3.0"})}),e.jsx(k,{checked:(s==null?void 0:s.selectedGDPR)||!1,onChange:l=>d(l,"gdpr"),className:"wdt-200 mt-4 mr-2",value:"gdpr",isInfo:!b,title:e.jsx(M,{title:a("Add GDPR","bit-integrations")}),subTitle:e.jsx(I,{title:a("GDPR","bit-integrations"),subTitle:a("Add GDPR Marketing Preferences","bit-integrations"),proVersion:"2.3.0"})}),b&&e.jsxs(e.Fragment,{children:[e.jsxs(S,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:a("Ok","bit-integrations"),show:i.show==="language",close:r,action:r,title:a("Add Language","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsx("div",{className:"flx flx-between mt-2",children:e.jsx($,{className:"msl-wrp-options",defaultValue:s==null?void 0:s.selectedLanguage,options:se,onChange:l=>h(l,"selectedLanguage"),closeOnSelect:!0,singleSelect:!0})})]}),e.jsxs(S,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"purple",btnTxt:a("Ok","bit-integrations"),show:i.show==="gdpr",close:r,action:r,title:a("Write down GDPR marketing options","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsxs("p",{children:[e.jsx("b",{children:a("Note","bit-integrations")}),":"," ",sprintf(a("Write down your preferred GDPR marketing options, separated by commas %s. For example: Email Address, Phone Number.","bit-integrations"),'(",")')]}),e.jsx("div",{className:"flx flx-between mt-2",children:e.jsx("input",{className:"btcd-paper-inp mt-1",onChange:l=>h(l.target.value,"selectedGDPR"),name:"selectedGDPR",value:s==null?void 0:s.selectedGDPR,type:"text",placeholder:a("GDPR Marketing Preferences...","bit-integrations")})})]})]})]})})}const se=[{label:"English",value:"en"},{label:"Arabic",value:"ar"},{label:"Afrikaans",value:"af"},{label:"Belarusian",value:"be"},{label:"Bulgarian",value:"bg"},{label:"Catalan",value:"ca"},{label:"Chinese",value:"zh"},{label:"Croatian",value:"hr"},{label:"Czech",value:"cs"},{label:"Danish",value:"da"},{label:"Dutch",value:"nl"},{label:"Estonian",value:"et"},{label:"Farsi",value:"fa"},{label:"Finnish",value:"fi"},{label:"French (France)",value:"fr"},{label:"French (Canada)",value:"fr_CA"},{label:"German",value:"de"},{label:"Greek",value:"el"},{label:"Hebrew",value:"he"},{label:"Hindi",value:"hi"},{label:"Hungarian",value:"hu"},{label:"Icelandic",value:"is"},{label:"Indonesian",value:"id"},{label:"Irish",value:"ga"},{label:"Italian",value:"it"},{label:"Japanese",value:"ja"},{label:"Khmer",value:"km"},{label:"Korean",value:"ko"},{label:"Latvian",value:"lv"},{label:"Lithuanian",value:"lt"},{label:"Maltese",value:"mt"},{label:"Malay",value:"ms"},{label:"Macedonian",value:"mk"},{label:"Norwegian",value:"no"},{label:"Polish",value:"pl"},{label:"Portuguese (Brazil)",value:"pt"},{label:"Portuguese (Portugal)",value:"pt_PT"},{label:"Romanian",value:"ro"},{label:"Russian",value:"ru"},{label:"Serbian",value:"sr"},{label:"Slovak",value:"sk"},{label:"Slovenian",value:"sl"},{label:"Spanish (Mexico)",value:"es"},{label:"Spanish (Spain)",value:"es_ES"},{label:"Swahili",value:"sw"},{label:"Swedish",value:"sv"},{label:"Tamil",value:"ta"},{label:"Thai",value:"th"},{label:"Turkish",value:"tr"},{label:"Ukrainian",value:"uk"},{label:"Vietnamese",value:"vi"}];function ae({i:s,formFields:c,field:n,mailChimpConf:t,setMailChimpConf:i}){var r,h,N,w,p;const g=q(G),{isPro:v}=g,b=((h=(r=t.default)==null?void 0:r.fields)==null?void 0:h[t.listId])&&Object.values(t.default.fields[t.listId]).filter(l=>l.required===!0)||[],d=((w=(N=t.default)==null?void 0:N.fields)==null?void 0:w[t.listId])&&Object.values(t.default.fields[t.listId]).filter(l=>l.required===!1)||[];return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:n.formField||"",onChange:l=>R(l,s,t,i),children:[e.jsx("option",{value:"",children:a("Select Field","bit-integrations")}),e.jsx("optgroup",{label:a("Form Fields","bit-integrations"),children:c.map(l=>l.type!=="file"&&e.jsx("option",{value:l.name,children:l.label},`ff-zhcrm-${l.name}`))}),e.jsx("option",{value:"custom",children:a("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`${a("General Smart Codes","bit-integrations")} ${v?"":`(${a("Pro","bit-integrations")})`}`,children:v&&((p=Y)==null?void 0:p.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`)))})]}),n.formField==="custom"&&e.jsx(C,{onChange:l=>f(l,s,t,i),label:a("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:n.customValue,placeholder:a("Custom Value","bit-integrations"),formFields:c}),e.jsxs("select",{className:"btcd-paper-inp",name:"mailChimpField",value:n.mailChimpField||"",onChange:l=>R(l,s,t,i),disabled:s<b.length,children:[e.jsx("option",{value:"",children:a("Select Field","bit-integrations")}),s<b.length?e.jsx("option",{value:b[s].tag,children:b[s].name},`mchimp-${b[s].tag}`):d.map(({tag:l,name:x})=>e.jsx("option",{value:l,children:x},`mchimp-${l}`))]})]}),e.jsx("button",{onClick:()=>D(s,t,i),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>K(s,t,i),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(L,{})})]})}function ve({formID:s,formFields:c,handleInput:n,mailChimpConf:t,setMailChimpConf:i,isLoading:g,setIsLoading:v,setSnackbar:b,a:d,loading:r,setLoading:h}){var p,l,x,o,F,_,m;const N=[{tag:"addr1",name:a("Address 1","bit-integrations"),required:!0},{tag:"addr2",name:a("Address 2","bit-integrations"),required:!1},{tag:"city",name:a("City","bit-integrations"),required:!0},{tag:"zip",name:a("Zip","bit-integrations"),required:!0},{tag:"state",name:a("State","bit-integrations"),required:!0},{tag:"country",name:a("Country","bit-integrations"),required:!1}],w=u=>{const j=A({},t);u?j.tags=u?u.split(","):[]:delete j.tags,i(A({},j))};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:a("Module:","bit-integrations")}),e.jsxs("select",{onChange:n,name:"module",value:t.module,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:a("Select Module","bit-integrations")}),(t==null?void 0:t.moduleLists)&&t.moduleLists.map((u,j)=>e.jsx("option",{value:u.name,children:u.label},j))]}),e.jsx("button",{onClick:()=>J(i,v,b),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh module list"'},type:"button",disabled:g,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:a("Audience List:","bit-integrations")}),e.jsxs("select",{onChange:n,name:"listId",value:t.listId,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:a("Select Audience List","bit-integrations")}),((p=t==null?void 0:t.default)==null?void 0:p.audiencelist)&&Object.keys(t.default.audiencelist).map(u=>e.jsx("option",{value:t.default.audiencelist[u].listId,children:t.default.audiencelist[u].listName},u))]}),e.jsx("button",{onClick:()=>Z(s,t,i,v,b),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Audience list"'},type:"button",disabled:g,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),(t==null?void 0:t.listId)&&((l=t==null?void 0:t.default)==null?void 0:l.audienceTags)&&e.jsxs("div",{className:"d-flx",children:[e.jsx("b",{style:{marginTop:"15px"},className:"wdt-200 d-in-b",children:a("Tags:","bit-integrations")}),e.jsx($,{defaultValue:t==null?void 0:t.tags,className:"btcd-paper-drpdwn w-5",options:((x=t==null?void 0:t.default)==null?void 0:x.audienceTags)&&Object.keys(t.default.audienceTags).map(u=>({label:t.default.audienceTags[u].tagName,value:t.default.audienceTags[u].tagName})),onChange:u=>w(u)}),e.jsx("button",{onClick:()=>Q(s,t,i,b,r,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh MailChimp Tags","bit-integrations")}'`},type:"button",disabled:r==null?void 0:r.tags,children:"↻"})]}),(g||(r==null?void 0:r.tags)||(r==null?void 0:r.refreshFields))&&e.jsx(B,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),((F=(o=t.default)==null?void 0:o.fields)==null?void 0:F[t.listId])&&!(r!=null&&r.refreshFields)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:a("Map Fields","bit-integrations")}),e.jsx("button",{onClick:()=>X(s,t,i,b,r,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh fields","bit-integrations")}'`},type:"button",disabled:r==null?void 0:r.refreshFields,children:"↻"})]}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Mail Chimp Fields","bit-integrations")})})]}),t.field_map.map((u,j)=>e.jsx(ae,{i:j,field:u,mailChimpConf:t,formFields:c,setMailChimpConf:i},`sheet-m-${j+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>D(t.field_map.length,t,i),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),((_=t.actions)==null?void 0:_.address)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Address Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Form Address Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Mail Chimp Address Fields","bit-integrations")})})]}),(m=t==null?void 0:t.address_field)==null?void 0:m.map((u,j)=>e.jsx(ee,{i:j,field:u,mailChimpConf:t,formFields:c,setMailChimpConf:i,addressField:N},`sheet-m-${j+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>W(t.address_field.length,t,i),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsx("br",{}),e.jsx("br",{})]}),t.listId&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Utilities","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(te,{mailChimpConf:t,setMailChimpConf:i,formFields:c,address:N})]})]})}export{ve as M};
