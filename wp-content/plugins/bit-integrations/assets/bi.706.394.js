var w=Object.defineProperty;var C=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var h=(s,i,a)=>i in s?w(s,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[i]=a,_=(s,i)=>{for(var a in i||(i={}))F.call(i,a)&&h(s,a,i[a]);if(C)for(var a of C(i))I.call(i,a)&&h(s,a,i[a]);return s};import{u as E,r as n,j as r}from"./main-794.js";import"./bi.266.440.js";import{_ as e,d as l}from"./bi.828.0.js";import{S as T}from"./bi.961.13.js";import{S as L}from"./bi.552.957.js";import{I as O,g as W}from"./bi.499.3.js";import z from"./bi.601.252.js";import{h as A,c as x}from"./bi.158.887.js";import{C as B}from"./bi.640.888.js";import"./bi.685.9.js";import"./bi.690.11.js";import"./bi.811.14.js";import"./bi.510.749.js";function ae({formFields:s,setFlow:i,flow:a,allIntegURL:c}){const m=E(),[S,g]=n.useState(!1),[f,y]=n.useState({}),[o,k]=n.useState(1),[N,p]=n.useState({show:!1}),v=[{key:"name",label:e("Name","bit-integrations"),required:!0},{key:"email_domain",label:e("Email","bit-integrations"),required:!1},{key:"details",label:e("Description","bit-integrations"),required:!1},{key:"street",label:e("Street","bit-integrations"),required:!1},{key:"city",label:e("City","bit-integrations"),required:!1},{key:"state",label:e("State","bit-integrations"),required:!1},{key:"postal_code",label:e("Postal Code","bit-integrations"),required:!1},{key:"country",label:e("Country","bit-integrations"),required:!1},{key:"phone_numbers",label:e("Phone","bit-integrations"),required:!1},{key:"websites",label:e("Website","bit-integrations"),required:!1}],j=[{key:"name",label:e("Name","bit-integrations"),required:!0},{key:"title",label:e("Title","bit-integrations"),required:!1},{key:"details",label:e("Description","bit-integrations"),required:!1},{key:"email_domain",label:e("Email","bit-integrations"),required:!1},{key:"phone_numbers",label:e("Phone","bit-integrations"),required:!1},{key:"street",label:e("Street","bit-integrations"),required:!1},{key:"city",label:e("City","bit-integrations"),required:!1},{key:"state",label:e("State","bit-integrations"),required:!1},{key:"postal_code",label:e("Postal Code","bit-integrations"),required:!1},{key:"country",label:e("Country","bit-integrations"),required:!1},{key:"websites",label:e("Website","bit-integrations"),required:!1}],P=[{key:"name",label:e("Opportunity Name","bit-integrations"),required:!0},{key:"close_date",label:e("Close Date","bit-integrations"),required:!1},{key:"details",label:e("Opportunity Details","bit-integrations"),required:!1},{key:"monetary_value",label:e("Value","bit-integrations"),required:!1}],M=[{key:"name",label:e("Task Name","bit-integrations"),required:!0},{key:"due_date",label:e("Due Date","bit-integrations"),required:!1},{key:"reminder_date",label:e("Reminder Date","bit-integrations"),required:!1},{key:"details",label:e("Description","bit-integrations"),required:!1}],[t,d]=n.useState({name:"CopperCRM",type:"CopperCRM",api_key:"",api_email:"",field_map:[{formField:"",coppercrmFormField:""}],actionName:"",companyFields:v,personFields:j,opportunityFields:P,taskFields:M,actions:{}}),D=()=>{g(!0),W(a,i,c,t,m,"","",g).then(u=>{var q;u.success?(l.success((q=u.data)==null?void 0:q.msg),m(c)):l.error(u.data||u)})},R=b=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!x(t)){l.error(e("Please map mandatory fields","bit-integrations"));return}if(t.actionName==="opportunity"){if(!t.selectedCRMPeople){l.error(e("Please select a people","bit-integrations"));return}if(!t.selectedCRMPipelines&&t.actionName==="opportunity"){l.error(e("Please select a Pipeline","bit-integrations"));return}}t.field_map.length>0&&k(b)};return r.jsxs("div",{children:[r.jsx(T,{snack:N,setSnackbar:p}),r.jsx("div",{className:"txt-center mt-2",children:r.jsx(L,{step:3,active:o})}),r.jsx(z,{coppercrmConf:t,setCopperCRMConf:d,step:o,setStep:k,loading:f,setLoading:y,setSnackbar:p}),r.jsxs("div",{className:"btcd-stp-page",style:_({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[r.jsx(B,{formFields:s,handleInput:b=>A(b,t,d),coppercrmConf:t,setCopperCRMConf:d,loading:f,setLoading:y,setSnackbar:p}),(t==null?void 0:t.actionName)&&r.jsxs("button",{onClick:()=>R(3),disabled:!x(t),className:"btn f-right btcd-btn-lg purple sh-sm flx",type:"button",children:[e("Next","bit-integrations")," Â ",r.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(t==null?void 0:t.actionName)&&r.jsx(O,{step:o,saveConfig:()=>D(),isLoading:S,dataConf:t,setDataConf:d,formFields:s})]})}export{ae as default};
